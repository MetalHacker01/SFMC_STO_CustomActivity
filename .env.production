# Production Environment Configuration for Send Time Optimization Activity
# 
# IMPORTANT: This file contains production environment variables.
# Copy this file to .env and update with your actual production values.
# Never commit actual production secrets to version control.

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
NODE_ENV=production
APP_VERSION=1.0.0
BUILD_NUMBER=
DEPLOYMENT_DATE=

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=443
HOST=0.0.0.0

# SSL/TLS Configuration
SSL_ENABLED=true
SSL_KEY_PATH=/etc/ssl/private/server.key
SSL_CERT_PATH=/etc/ssl/certs/server.crt
SSL_CA_PATH=/etc/ssl/certs/ca.crt

# Server Timeouts (milliseconds)
SERVER_TIMEOUT=30000
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration
JWT_SECRET=your-production-jwt-secret-here-use-strong-random-string
JWT_ISSUER=send-time-optimization
JWT_AUDIENCE=sfmc-journey-builder

# CORS Configuration
ALLOWED_ORIGINS=https://*.marketingcloudapis.com,https://*.exacttarget.com

# Rate Limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=1000

# Content Security Policy
CSP_REPORT_ONLY=false

# =============================================================================
# SFMC CONFIGURATION
# =============================================================================

# SFMC Journey Builder
APP_EXTENSION_KEY=your-production-app-extension-key

# SFMC API Credentials
SFMC_CLIENT_ID=your-production-client-id
SFMC_CLIENT_SECRET=your-production-client-secret
SFMC_SUBDOMAIN=your-production-subdomain
SFMC_ACCOUNT_ID=your-production-account-id

# SFMC API URLs
SFMC_AUTH_URL=https://your-production-subdomain.auth.marketingcloudapis.com/v2/token
SFMC_REST_BASE_URL=https://your-production-subdomain.rest.marketingcloudapis.com

# SFMC API Settings
SFMC_API_TIMEOUT=30000
SFMC_API_RETRIES=3
SFMC_API_RETRY_DELAY=1000
SFMC_RATE_LIMIT_REQUESTS=2500
SFMC_RATE_LIMIT_WINDOW=60000

# =============================================================================
# DATA EXTENSION CONFIGURATION
# =============================================================================
DE_EXTERNAL_KEY=your-production-data-extension-key
DE_NAME=your-production-data-extension-name

# =============================================================================
# SEND TIME OPTIMIZATION CONFIGURATION
# =============================================================================

# Core STO Settings
STO_DEFAULT_TIMEZONE=America/Chicago
STO_MAX_PROCESSING_TIME=20000
STO_BATCH_SIZE=100

# Time Window Settings
STO_MIN_TIME_WINDOWS=1
STO_MAX_TIME_WINDOWS=24
STO_DEFAULT_TIME_WINDOWS=[{"startHour":9,"endHour":10,"enabled":true},{"startHour":10,"endHour":11,"enabled":true},{"startHour":14,"endHour":15,"enabled":true}]

# Timezone Support
STO_SUPPORTED_COUNTRIES=US,CA,GB,AU,DE,FR,IT,ES,BR,MX,JP,CN,IN,RU,ZA
STO_FALLBACK_COUNTRY=US

# =============================================================================
# HOLIDAY API CONFIGURATION
# =============================================================================
STO_HOLIDAY_API_URL=https://date.nager.at/api/v3
STO_HOLIDAY_API_ENABLED=true
HOLIDAY_API_TIMEOUT=10000
HOLIDAY_API_RETRIES=2
HOLIDAY_API_RETRY_DELAY=2000

# Holiday API Fallback
HOLIDAY_API_FALLBACK_ENABLED=true
HOLIDAY_FALLBACK_DATA_PATH=./data/holidays

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================

# Holiday Cache
HOLIDAY_CACHE_TTL=86400
HOLIDAY_CACHE_MAX_KEYS=1000
HOLIDAY_CACHE_CHECK_PERIOD=600

# Timezone Cache
TIMEZONE_CACHE_TTL=3600
TIMEZONE_CACHE_MAX_KEYS=500

# Token Cache
TOKEN_CACHE_TTL=3300
STO_CACHE_TIMEOUT=3600

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# HTTP Settings
HTTP_MAX_SOCKETS=50
HTTP_MAX_FREE_SOCKETS=10
HTTP_TIMEOUT=30000
HTTP_KEEP_ALIVE_MS=1000

# Retry Settings
STO_MAX_RETRIES=3
STO_RETRY_DELAY=1000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Levels: error, warn, info, debug
LOG_LEVEL=info
LOG_FORMAT=json

# File Logging
FILE_LOGGING_ENABLED=true
LOG_FILE_PATH=/var/log/sto-activity
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=10

# Console Logging
CONSOLE_LOGGING_ENABLED=true

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Health Checks
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Health Thresholds
HEALTH_RESPONSE_TIME_THRESHOLD=5000
HEALTH_ERROR_RATE_THRESHOLD=0.05
HEALTH_MEMORY_THRESHOLD=0.85
HEALTH_CPU_THRESHOLD=0.80

# Metrics Collection
METRICS_INTERVAL=60000
METRICS_RETENTION=86400000

# Prometheus
PROMETHEUS_ENABLED=true

# Alerting
ALERT_EVALUATION_INTERVAL=30000

# =============================================================================
# EXTERNAL LOGGING SERVICES
# =============================================================================

# Datadog
DATADOG_ENABLED=false
DATADOG_API_KEY=your-datadog-api-key

# New Relic
NEW_RELIC_ENABLED=false
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
NEW_RELIC_APP_NAME=STO Activity

# =============================================================================
# ALERT CHANNELS
# =============================================================================

# Email Alerts
EMAIL_ALERTS_ENABLED=false
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
ALERT_EMAIL_RECIPIENTS=admin@yourcompany.com,ops@yourcompany.com

# Webhook Alerts
WEBHOOK_ALERTS_ENABLED=false
ALERT_WEBHOOK_URL=https://your-webhook-url.com/alerts
WEBHOOK_TIMEOUT=5000

# Slack Alerts
SLACK_ALERTS_ENABLED=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#alerts

# =============================================================================
# DATABASE CONFIGURATION (Optional)
# =============================================================================

# PostgreSQL (for audit logs and metrics storage)
POSTGRES_ENABLED=false
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=sto_activity
POSTGRES_USER=your-postgres-user
POSTGRES_PASSWORD=your-postgres-password
POSTGRES_SSL=true

# PostgreSQL Connection Pool
POSTGRES_POOL_MIN=2
POSTGRES_POOL_MAX=10
POSTGRES_POOL_ACQUIRE=30000
POSTGRES_POOL_IDLE=10000

# Redis (for caching and session storage)
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_CONNECT_TIMEOUT=10000

# Redis Cluster
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=redis1.example.com:6379,redis2.example.com:6379,redis3.example.com:6379

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_BATCH_PROCESSING=true
FEATURE_ADVANCED_MONITORING=true
FEATURE_HOLIDAY_API=true
FEATURE_PERFORMANCE_OPTS=true

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Container/Platform Settings
CONTAINER_MEMORY_LIMIT=512MB
CONTAINER_CPU_LIMIT=1000m

# Load Balancer Health Check
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_GRACE_PERIOD=30

# Auto-scaling Settings
MIN_INSTANCES=2
MAX_INSTANCES=10
TARGET_CPU_UTILIZATION=70
TARGET_MEMORY_UTILIZATION=80

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Backup Settings
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/backups/sto-activity

# =============================================================================
# COMPLIANCE AND AUDIT
# =============================================================================

# Audit Logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90

# Data Retention
DATA_RETENTION_DAYS=365
METRICS_RETENTION_DAYS=30
LOG_RETENTION_DAYS=90